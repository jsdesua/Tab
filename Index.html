<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Calculator</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif; display:flex; align-items:center; justify-content:center; height:100vh; background:#f0f2f5; }
    .calc { background:#222; padding:16px; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,0.2); width:320px; }
    .display { background:#000; color:#0f0; font-size:24px; padding:12px; border-radius:6px; text-align:right; min-height:48px; margin-bottom:8px; word-wrap:break-word; }
    .buttons { display:grid; grid-template-columns: repeat(4, 1fr); gap:8px; }
    button { font-size:18px; padding:14px; border-radius:8px; border: none; cursor:pointer; }
    .op { background:#ff9500; color:#fff; }
    .func { background:#a6a6a6; color:#000; }
    .num { background:#333; color:#fff; }
    .wide { grid-column: span 2; }
  </style>
</head>
<body>
  <div class="calc">
    <div id="display" class="display">0</div>
    <div class="buttons">
      <button class="func" data-action="clear">C</button>
      <button class="func" data-action="back">←</button>
      <button class="func" data-action="percent">%</button>
      <button class="op" data-value="/">÷</button>

      <button class="num" data-value="7">7</button>
      <button class="num" data-value="8">8</button>
      <button class="num" data-value="9">9</button>
      <button class="op" data-value="*">×</button>

      <button class="num" data-value="4">4</button>
      <button class="num" data-value="5">5</button>
      <button class="num" data-value="6">6</button>
      <button class="op" data-value="-">−</button>

      <button class="num" data-value="1">1</button>
      <button class="num" data-value="2">2</button>
      <button class="num" data-value="3">3</button>
      <button class="op" data-value="+">+</button>

      <button class="num wide" data-value="0">0</button>
      <button class="num" data-value=".">.</button>
      <button class="op" data-action="equals">=</button>
    </div>
  </div>

  <script>
    const display = document.getElementById('display');
    let expr = '';

    function updateDisplay(text) {
      display.textContent = text || '0';
    }

    function append(value) {
      // Prevent multiple leading zeros
      if (expr === '0' && value === '0') return;
      // Replace leading zero before decimal or number
      if (expr === '0' && value !== '.') expr = value;
      else expr += value;
      updateDisplay(expr);
    }

    function backspace() {
      expr = expr.slice(0, -1);
      updateDisplay(expr);
    }

    function clearAll() {
      expr = '';
      updateDisplay('0');
    }

    function percent() {
      try {
        const v = eval(expr || '0') / 100;
        expr = String(v);
        updateDisplay(expr);
      } catch {
        updateDisplay('Error');
      }
    }

    function calculate() {
      try {
        // Replace × and ÷ if present (we used * and / already)
        const safe = expr;
        const result = eval(safe);
        expr = String(result);
        updateDisplay(expr);
      } catch {
        updateDisplay('Error');
      }
    }

    document.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', () => {
        const v = btn.dataset.value;
        const action = btn.dataset.action;
        if (action === 'clear') return clearAll();
        if (action === 'back') return backspace();
        if (action === 'percent') return percent();
        if (action === 'equals') return calculate();
        if (v) return append(v);
      });
    });

    // Keyboard support
    window.addEventListener('keydown', (e) => {
      if (e.key >= '0' && e.key <= '9') append(e.key);
      else if (e.key === '.') append('.');
      else if (['+', '-', '*', '/'].includes(e.key)) append(e.key);
      else if (e.key === 'Enter') calculate();
      else if (e.key === 'Backspace') backspace();
      else if (e.key === 'Escape') clearAll();
    });
  </script>
</body>
        </html>
